# ============================================================================
# GigaChad GRC - Production Environment Configuration
# ============================================================================
# Copy this file to .env.prod and fill in your values
# NEVER commit .env.prod to version control!
#
# Generate secrets using:
#   openssl rand -hex 32        # For encryption keys
#   openssl rand -base64 64     # For JWT/session secrets
#   openssl rand -base64 24     # For passwords
# ============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=production

# -----------------------------------------------------------------------------
# Security Secrets (REQUIRED - Generate unique values!)
# -----------------------------------------------------------------------------
# Encryption key for sensitive data (32+ hex characters)
# Generate: openssl rand -hex 32
ENCRYPTION_KEY=

# JWT signing secret (64+ base64 characters)
# Generate: openssl rand -base64 64
JWT_SECRET=

# Session secret (64+ base64 characters)
# Generate: openssl rand -base64 64
SESSION_SECRET=

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_USER=grc_prod_user
POSTGRES_PASSWORD=
POSTGRES_DB=gigachad_grc_prod
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full connection URL with SSL for production
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=require

# Connection pool settings
DATABASE_CONNECTION_LIMIT=50
DATABASE_POOL_TIMEOUT=10

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}

# -----------------------------------------------------------------------------
# Object Storage (MinIO/S3)
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=true
MINIO_ROOT_USER=
MINIO_ROOT_PASSWORD=
MINIO_ACCESS_KEY=${MINIO_ROOT_USER}
MINIO_SECRET_KEY=${MINIO_ROOT_PASSWORD}

# S3 bucket names
S3_BUCKET_EVIDENCE=grc-evidence-prod
S3_BUCKET_EXPORTS=grc-exports-prod
S3_BUCKET_BACKUPS=grc-backups-prod

# -----------------------------------------------------------------------------
# Authentication (Keycloak)
# -----------------------------------------------------------------------------
KEYCLOAK_URL=https://auth.yourdomain.com
KEYCLOAK_REALM=grc
KEYCLOAK_CLIENT_ID=grc-app
KEYCLOAK_CLIENT_SECRET=
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=

# IMPORTANT: Disable dev auth in production!
USE_DEV_AUTH=false

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------
APP_DOMAIN=yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Specify exact domains for production
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Backup Configuration (IMPORTANT for production!)
# -----------------------------------------------------------------------------
# Local backup settings
BACKUP_RETENTION_DAYS=90

# Remote backup (S3) - REQUIRED for production disaster recovery
DR_REMOTE_BACKUP_ENABLED=true
DR_REMOTE_BACKUP_S3_BUCKET=your-backup-bucket
DR_REMOTE_BACKUP_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Auto backup scheduling
AUTO_BACKUP_ENABLED=true
AUTO_BACKUP_SCHEDULE=0 2 * * *

# -----------------------------------------------------------------------------
# Monitoring & Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info

# Sentry error tracking (recommended for production)
SENTRY_ENABLED=true
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics
METRICS_ENABLED=true

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@yourdomain.com
SMTP_SECURE=true

# -----------------------------------------------------------------------------
# AI Configuration (Optional)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
AI_RISK_SCORING_ENABLED=false
AI_CATEGORIZATION_ENABLED=false

# -----------------------------------------------------------------------------
# External Integrations
# -----------------------------------------------------------------------------
FIELDGUIDE_ENABLED=false
FIELDGUIDE_CLIENT_ID=
FIELDGUIDE_CLIENT_SECRET=

SLACK_ENABLED=true
SLACK_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# Frontend Environment Variables
# -----------------------------------------------------------------------------
VITE_API_URL=https://api.yourdomain.com
VITE_KEYCLOAK_URL=${KEYCLOAK_URL}
VITE_KEYCLOAK_REALM=${KEYCLOAK_REALM}
VITE_KEYCLOAK_CLIENT_ID=${KEYCLOAK_CLIENT_ID}
VITE_ERROR_TRACKING_ENABLED=true
VITE_SENTRY_DSN=${SENTRY_DSN}

